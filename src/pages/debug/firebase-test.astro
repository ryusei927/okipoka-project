---
// src/pages/debug/firebase-test.astro
---
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>Firebase接続テスト</title>
</head>
<body>
  <h1>Firebase接続テスト</h1>
  <p>デベロッパーツールのコンソールを開いて結果を確認してください。</p>

  <script type="module">
    import { initializeApp } from "firebase/app";
    import { getAuth, signInAnonymously } from "firebase/auth";

    // src/lib/firebase.ts と同じ設定をここに直接書きます
    const firebaseConfig = {
      apiKey:            import.meta.env.VITE_FIREBASE_API_KEY,
      authDomain:        import.meta.env.VITE_FIREBASE_AUTH_DOMAIN,
      projectId:         import.meta.env.VITE_FIREBASE_PROJECT_ID,
      storageBucket:     import.meta.env.VITE_FIREBASE_STORAGE_BUCKET,
      messagingSenderId: import.meta.env.VITE_FIREBASE_MESSAGING_SENDER_ID,
      appId:             import.meta.env.VITE_FIREBASE_APP_ID,
    };

    try {
      const app = initializeApp(firebaseConfig);
      const auth = getAuth(app);
      
      await signInAnonymously(auth);

      console.log("✅ 匿名ログイン成功！Firebaseのフロントエンド設定は正しいです。");
      alert("成功！フロントエンドのFirebase設定は問題ありません。");

    } catch (error) {
      console.error("❌ 匿名ログイン失敗:", error);
      alert("失敗。エラー内容をコンソールで確認してください。");
    }
  </script>
</body>
</html>